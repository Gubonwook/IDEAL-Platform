@echo off
setlocal enabledelayedexpansion
chcp 65001 > nul

REM λ°°μΉ νμΌμ΄ μλ” ν΄λ”λ΅ μ‘μ—… κ²½λ΅λ¥Ό λ³€κ²½ν•©λ‹λ‹¤.
cd /d "%~dp0"

echo.
echo ==================================================================
echo      Material Analysis μ¤ν¬λ¦½νΈλ¥Ό μ‹μ‘ν•©λ‹λ‹¤.
echo ==================================================================
echo.

REM Conda ν™κ²½ 'matgl_env'λ¥Ό ν™μ„±ν™”ν•©λ‹λ‹¤.
echo [1/2] Conda ν™κ²½ 'matgl_env'λ¥Ό ν™μ„±ν™”ν•©λ‹λ‹¤...
call conda activate matgl_env

REM Conda ν™μ„±ν™” μ‹¤ν¨ μ‹ μ¤λ¥ λ©”μ‹μ§€
if "!ERRORLEVEL!" neq "0" (
    echo.
    echo ^>^>^> ERROR: 'matgl_env' ν™κ²½μ„ ν™μ„±ν™”ν•  μ μ—†μµλ‹λ‹¤.
    echo Condaκ°€ μ„¤μΉλμ—λ”μ§€, ν™κ²½ μ΄λ¦„μ΄ μ •ν™•ν•μ§€ ν™•μΈν•μ„Έμ”.
    pause
    exit /b
)

REM νμ΄μ¬ μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
echo.
echo [2/2] 'total.py' μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤...
echo.
python total.py

REM νμ΄μ¬ μ¤ν¬λ¦½νΈμ μ„±κ³µ/μ‹¤ν¨ μ—¬λ¶€λ¥Ό ν™•μΈν•©λ‹λ‹¤.
if "!ERRORLEVEL!" neq "0" (
    echo.
    echo ^>^>^> ERROR: νμ΄μ¬ μ¤ν¬λ¦½νΈ μ‹¤ν–‰ μ¤‘ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤.
) else (
    echo.
    echo ==================================================================
    echo      π‰ λ¨λ“  μ‘μ—…μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤! π‰
    echo ==================================================================
)

REM μ‘μ—… μ™„λ£ ν›„ μ°½μ΄ λ°”λ΅ λ‹«νμ§€ μ•λ„λ΅ ν•©λ‹λ‹¤.
echo.
pause